pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
function _init()
<<<<<<< HEAD
	p={x=64,y=90} 
	gravity=0.3
	friction=0.8
=======
	p={x=64,y=90,speed=1,ingredients=0}
>>>>>>> df07e3421892b69a2e6c88aae7f758e490d02d8a
	spawn_pieuvre()
	pieuvre={x=30,y=-50,sprite=19,falling=true}
	ingredients={x=60,y=20,sprite=0,displayed=false}
end

function _update60()
	if (btn(➡️)) p.x+=friction
	if (btn(⬅️)) p.x-=friction
	if (btn(⬆️)) p.y-=friction
			if collide_map(p,,)==false then
			p.y+=gravity
			end
	falling_pieuvre()
	update_ingredients()
end

function _draw()
	cls()
	map(0,0,0,0)
	spr(96,p.x,p.y,4,4)
	draw_pieuvre()
<<<<<<< HEAD
	if (pieuvre.y==1) then
		if ingredients.displayed==false then
		draw_ingredients()
		else update_ingredients()
		end
	end
=======
	draw_ui()
	get_ingredients(x,y)
	pick_ingredients(x,y)
	interact(x,y)
>>>>>>> df07e3421892b69a2e6c88aae7f758e490d02d8a
end

-->8
--pieuvre

function spawn_pieuvre()
add(pieuvre,pieuvre)

end

--descente de la pieuvre
function falling_pieuvre()
	local ymax=1
	
	-- operationnel
		if pieuvre.y < ymax then
		pieuvre.y+=0.5

		end
end


function draw_pieuvre()
	spr(19,pieuvre.x,pieuvre.y,9,5)
end
-->8
--ingredients

function shoot_ingredients()
	tomate={
		x=64,
		y=74,
		speed=2
}
	add(ingredients,tomate)
end

function update_ingredients()

	if pieuvre.y==1 then
		ingredients.y+=0.5
	end
	

		--for p in all(pieuvre) do
			--ingredients.y+=0.5
			--if ingredients.y > 128 then
				--del(ingredients,p)
			--end
	--end
	
		--for i in all(ingredients) do
			--if collision(p,i) then
			--	del(ingredients,i)
			--end
		--end
end

function draw_ingredients()
	spr(0,ingredients.x,ingredients.y)
end

<<<<<<< HEAD
-->8
--tomate

--function spawn_tomate()
--add(tomate,tomate)

--end

--descente de la pieuvre
--function falling_tomate()
	--local ymax=1
	
	-- operationnel
		--if tomate.y <= ymax then
		--tomate.y+=0.3
	--	end
--end


--function draw_tomate()
	--spr(0,tomate.x,tomate.y)
--end
-->8
-- collision

function collide_map(obj,aim,flag)
--obj= table needs x,y,w,h

	local x=obj.x local y=obj.y
	local w=obj.w local h=obj.h

	local x1=0 local y1=0
	local x2=0 local y2=0

		if aim=="left" then
			x1=x-1 		y1=y
			x2=x 				y2=y+h-1

		elseif aim=="right" then
			x1=x+w 		y1=y
			x2=x+w+1 y2=y+h-1

		elseif aim=="up" then
			x1=x-1 		y1=y-1
			x2=x+w-1 y2=y

		elseif aim=="down" then
			x1=x 				y1=y+h
			x2=x+w 		y2=y+h
		end

			x1/=8				y1/=8
			x2/=8				y2/=8
		if fget(mget(x1,y1), 0)
		or fget(mget(x1,y2), 0)
		or fget(mget(x2,y1), 0)
		or fget(mget(x2,y2), 0) then
			return true
		else
			return false
		end
=======



-->8
--check flag
function check_flag(flag,x,y)
local sprite=mget(x,y)
return fget(sprite,flag)
end

  
function get_ingredients(x,y)
    sprite =mget(x,y)
    mset (x,y,3)
end

function pick_ingredients(x,y)
    get_ingredients(x,y)
    p.ingredients+=1
end

function interact(x,y)
  if not check_flag(1,x,y)
  then pick_ingredients(x,y)
  end
end
  
function draw_ui()
  spr(num,position)
  print("x"..p.ingredients,10,2,7) --.. veut dire +
>>>>>>> df07e3421892b69a2e6c88aae7f758e490d02d8a
end
__gfx__
000000000000000000111000ffffffffcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111b0000000bb001444100f777777fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0188b3b000000b3014788410f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
187787710000b33014844841f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
187c87c1000b3b0014844741f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1288882100b3300001487841f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012222100bb3000000144410f777777fcccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001111000b30000000011100ffffffffcccccccc00000000000eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000
03b303300000000000011000000000000000000000000000000eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000
033b3b3309999990016666100000000000000000000000000ee22222222eeee00000000000000000000000000000000000000000000000000000000000000000
0b3b33bb09aaaa90001881000000000000000000000000000ee22222222eeee00000000000000000000000000000000000000000000000000000000000000000
33bbbbb309aaa9900488882000000000000000000000000ee22222222222222ee000000000000000000000000000000000000000000000000000000000000000
3bbbbb3009aa99900488662000000000000000000000000ee22222222222222ee000000000000000000000000000000000000000000000000000000000000000
0333b33309aa999004887720000000000000000000000ee222222222222222222000000000000000000000000000000000000000000000000000000000000000
0033b3300999999004888820000000000000000000000ee222222222222222222000000000000000000000000000000000000000000000000000000000000000
00000000000000000022220000000000000000000000022222222222222222222ee0000000000000000000000000000000000000000000000000000000000000
00222200000110000000000000000000000000000000022222222222222222222ee0000000000000000000000000000000000000000000000000000000000000
02eeee20016666100001100000000000000000000000022222222222222222222220000000000000000000000000000000000000000000000000000000000000
02e77ee2001991000122221000000000000000000000022222222222222222222220000000000000000000000000000000000000000000000000000000000000
2ee2227e019aaa101ee112e100000000000000000000022222222222222222222220000000000000000000000000000000000000000000000000000000000000
2e72727e019a66101e29922100000000000000000000022222222222222222222220000000000000000000000000000000000000000000000000000000000000
2e7222ee019a77101221122100000000000000000000022227711222222771122220000000000000000000000000000000000000000000000000000000000000
02e77ee2019aaa101922e29100000000000000000000022227711222222771122220000000000000000000000000000000000000000000000000000000000000
00eeee20001111000199991000000000000000000000022221111222222111122220000000000111111000000000000000000000000000000000000000000000
01111110011111100499994000000000000000000000022221111222222111122220000000000111111000000000000000000000000000000000000000000000
11555510001c610049a9999400000000000110000000022222222222222222222220000000011111111110000000000000000000000000000000000000000000
1575555101ccc6109a99a99a00000000000110000000022222222222222222222220000000011111111110000000000000000000000000000000000000000000
100500011cc7cc6100000000000000000110000000000222222222222222222221111eeeeeeee111111111100000000000000000000000000000000000000000
105050511557555100000000000000000110000000000222222222222222222221111eeeeeeee111111111100000000000000000000000000000000000000000
15000551157555514444444400000000011110011111111222222222222222211eeee22222222ee1100111100000000000000000000000000000000000000000
01575711157555519999999900000000011110011111111222222222222222211eeee22222222ee1100111100000000000000000000000000000000000000000
00111100015555104999999400000000011eeeeee1111111122222222222211ee222222222222220000001100000000000000000000000000000000000000000
00000000000000000000000000000000011eeeeee1111111122222222222211ee222222222222220000001100000000000000000000000000000000000000000
000000000000000000000000000000000ee222222ee11eeee2222222222eeee2222222222222222ee00000000000000000000000000000000000000000000000
000000000000000000000000000000000ee222222ee11eeee2222222222eeee2222222222222222ee00000000000000000000000000000000000000000000000
0000000000000000000000000000000002222222222ee2222222222222222222222222222222222220000eeee000000000000000000000000000000000000000
0000000000000000000000000000000002222222222ee2222222222222222222222222222222222220000eeee000000000000000000000000000000000000000
000000000000000000000000000ee00ee22222222222222222222222222222222222211111122222200ee2211ee0000000000000000000000000000000000000
000000000000000000000000000ee00ee22222222222222222222222222222222222211111122222200ee2211ee0000000000000000000000000000000000000
00000000000000000000000000011ee22222211222222222222222222222222222211111111112222ee221100110000000000000000000000000000000000000
00000000000000000000000000011ee22222211222222222222222222222222222211111111112222ee221100110000000000000000000000000000000000000
00000000000000000000000000000112222110011222222222211112222222222111111111100112222110000000000000000000000000000000000000000000
00000000000000000000000000000112222110011222222222211112222222222111111111100112222110000000000000000000000000000000000000000000
00000000000000000000000000000001111000000111111111100001111111100000011110000001111000000000000000000000000000000000000000000000
00000000000000000000000000000001111000000111111111100001111111100000011110000001111000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aa9aaaaaaaaaaaaa9aa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaaaaaaaaaaaaaa9aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaaaaa1aaaaa1aaaaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001a9aaa111aaa111aaaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaaa17771a17771aa9a100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaa177cc717cc771aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaa17c11c1c11c71aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaa17c11cac11c71aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaa177cc1a1cc771aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001aaaa17771a17771aaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001aaaa111aaa111aaaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001aaa1aaaaaaaaa1aaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000019aaa111111111aaaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001aaaaa1771771aaaa91000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011aaaaa1771771aaaa91100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001771aaaaa11a11aaa9917710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000017719aaaaaaaaaaaaaa17710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000017177777778777777717100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001a11111111811111111a100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000011a14444444844444441a110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001aa14444444444444441aa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000111144444111114444411110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011111100011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
<<<<<<< HEAD
0202020100000000000000000000000002020200000000000000000000000000020204000000000000000000000000000404020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
=======
0202020000000000000000000000000002020200000000000000000000000000020200000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
>>>>>>> df07e3421892b69a2e6c88aae7f758e490d02d8a
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030202020202020505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030202020202020505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030304040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
