pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
function _init() 
	p={x=64,y=104,speed=1,score=0}
	
	spawn_pieuvre()
	
	pieuvre={x=30,y=-50,sprite=19,falling=true}
	
	ingredients={x=60,y=20,displayed=false}
	
	sfx(01)
	
end

function _update60()
	if (btn(➡️)) p.x+=p.speed
	if (btn(⬅️)) p.x-=p.speed

	falling_pieuvre()
	update_ingredients()
	
	if collision(p,ingredients)==true then
		ingredients.displayed=true
		p.score+=1
		sprite_isthere()
	end
	
end

function _draw()
	cls()
	map(0,0,0,0)
	spr(192,p.x,p.y,2,2)
	
	draw_pieuvre()
	
	if (pieuvre.y==1) then
	
		if ingredients.displayed==false then
		draw_ingredients()
		else update_ingredients()
		end
		
	end
	
print(p.score,2,2,10)

end

-->8
--pieuvre

function spawn_pieuvre()

	add(pieuvre,pieuvre)

end

--descente de la pieuvre
function falling_pieuvre()

	local ymax=1
	
	-- operationnel
		if pieuvre.y < ymax then
		pieuvre.y+=0.5
		end
		
end


function draw_pieuvre()

	spr(19,pieuvre.x,pieuvre.y,9,5)
	
end
-->8
--ingredients

function shoot_ingredients()
	tomate={
		x=60,
		y=20,
		displayed=false
}
	add(ingredients,tomate)
end

function update_ingredients()
		
	if pieuvre.y==1 then
		ingredients.y+=0.5
	end
	

		--for p in all(pieuvre) do
			--ingredients.y+=0.5
			--if ingredients.y > 128 then
				--del(ingredients,p)
			--end
	--end
	
		--for i in all(ingredients) do
			--if collision(p,i) then
			--	del(ingredients,i)
			--end
		--end
end

function draw_ingredients()
	spr(0,ingredients.x,ingredients.y)
end

-->8
-- shoot again

function sprite_isthere()

	
	
end
-->8
-- collision

--function collide_ing(obj)
--obj= table needs x,y,w,h

 --local x=obj.x local y=obj.y
	--local w=obj.w local h=obj.h

	--local x1=0 local y1=0
	--local x2=0 local y2=0

	--	if aim=="left" then
			--x1=x-1 		y1=y
		--	x2=x 				y2=y+h-1

		--elseif aim=="right" then
			--x1=x+w 		y1=y
			--x2=x+w+1 y2=y+h-1

		--elseif aim=="up" then
			--x1=x-1 		y1=y-1
		--	x2=x+w-1 y2=y

	--	elseif aim=="down" then
		--	x1=x 				y1=y+h
			--x2=x+w 		y2=y+h
		--end

			--x1/=16		 	y1/=16
			--x2/=16				y2/=16
	--	if fget(mget(x1,y1), 0)
		--or fget(mget(x1,y2), 0)
	--	or fget(mget(x2,y1), 0)
	--	or fget(mget(x2,y2), 0) then
			--return true
	--	else
			--return false
		--end
--end



-->8
--check flag
function check_flag(flag,x,y)
	local sprite=mget(x,y)
	return fget(97,0)
end

  
function get_ingredients(x,y)
    sprite =mget(x,y)
    mset (x,y,3)
end

function pick_ingredients(x,y)
    get_ingredients(x,y)
    p.ingredients+=1
end

function interact(x,y)
  if not check_flag(1,x,y)
  then pick_ingredients(x,y)
  end
end
  
function draw_ui()
  spr(num,position)
  print("x"..p.ingredients,10,2,7) --.. veut dire +

end
-->8
-- collisions part 2

function collision(pl,i)
	if pl.x>i.x+8
	or pl.y>i.y+8
	or pl.x+8<i.x
	or pl.y+8<i.y then
		return false
	else
		return true
	end
end
__gfx__
000000000000000000111000ffffffffcccccccc0000000000000000000000000000000000000000000000000000000011111111111111110000000000000000
00111b0000000bb001444100f777777fcccccccc0000000000000000000000000000000000000000000000000000000011111166166666610000000000000000
0188b3b000000b3014788410f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000016666666166666610000000000000000
187787710000b33014844841f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000016666666166666610000000000000000
187c87c1000b3b0014844741f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000016666666166666610000000000000000
1288882100b3300001487841f7ffff7fcccccccc0000000000000000000000000000000000000000000000000000000016666666166666610000000000000000
012222100bb3000000144410f777777fcccccccc0000000000000000000000000000000000000000000000000000000016666666166666610000000000000000
001111000b30000000011100ffffffffcccccccc00000000000eeeeeeee000000000000000000000000000000000000016666666166666610000000000000000
03b303300000000000011000000000000000000000000000000eeeeeeee000000000000000000000000000000000000016666666166666610000000000000000
033b3b3309999990016666100000000000000000000000000ee22222222eeee00000000000000000000000000000000016666666166666610000000000000000
0b3b33bb09aaaa90001881000000000000000000000000000ee22222222eeee00000000000000000000000000000000016666666166666610000000000000000
33bbbbb309aaa9900488882000000000000000000000000ee22222222222222ee000000000000000000000000000000016666666166666610000000000000000
3bbbbb3009aa99900488662000000000000000000000000ee22222222222222ee000000000000000000000000000000016666666166666610000000000000000
0333b33309aa999004887720000000000000000000000ee222222222222222222000000000000000000000000000000016666111111166610000000000000000
0033b3300999999004888820000000000000000000000ee222222222222222222000000000000000000000000000000016666166166166610000000000000000
00000000000000000022220000000000000000000000022222222222222222222ee0000000000000000000000000000016666166166166610000000000000000
00222200000110000000000000000000000000000000022222222222222222222ee0000000000000000000000000000016666166166166610000000000000000
02eeee20016666100001100000000000000000000000022222222222222222222220000000000000000000000000000016666111111166610000000000000000
02e77ee2001991000122221000000000000000000000022222222222222222222220000000000000000000000000000016666666166666610000000000000000
2ee2227e019aaa101ee112e100000000000000000000022222222222222222222220000000000000000000000000000016666666166666610000000000000000
2e72727e019a66101e29922100000000000000000000022222222222222222222220000000000000000000000000000016666666166666610000000000000000
2e7222ee019a77101221122100000000000000000000022227711222222771122220000000000000000000000000000016666666166666610000000000000000
02e77ee2019aaa101922e29100000000000000000000022227711222222771122220000000000000000000000000000016666666166666610000000000000000
00eeee20001111000199991000000000000000000000022221111222222111122220000000000111111000000000000015666666166666610000000000000000
01111110011111100499994000000000000000000000022221111222222111122220000000000111111000000000000015666666166666610000000000000000
11555510001c610049a9999400000000000110000000022222222222222222222220000000011111111110000000000015566666166666610000000000000000
1575555101ccc6109a99a99a00000000000110000000022222222222222222222220000000011111111110000000000015556666166666610000000000000000
100500011cc7cc6100000000000000000110000000000222222222222222222221111eeeeeeee111111111100000000015555666166666610000000000000000
105050511557555100000000000000000110000000000222222222222222222221111eeeeeeee111111111100000000015555566166666610000000000000000
15000551157555514444444400000000011110011111111222222222222222211eeee22222222ee1100111100000000015555556166666610000000000000000
01575711157555519999999900000000011110011111111222222222222222211eeee22222222ee1100111100000000015555555166666110000000000000000
00111100015555104999999400000000011eeeeee1111111122222222222211ee222222222222220000001100000000011111111111111110000000000000000
00000000000000000000000000000000011eeeeee1111111122222222222211ee22222222222222000000110000000000000000000000000cccccccccccccccc
000000000000000000000000000000000ee222222ee11eeee2222222222eeee2222222222222222ee000000000000000000000000000000044444ccccccccccc
000000000000000000000000000000000ee222222ee11eeee2222222222eeee2222222222222222ee000000000000000000000000000000045444444cccccccc
0000000000000000000000000000000002222222222ee2222222222222222222222222222222222220000eeee00000000000000000000000444555444ccccccc
0000000000000000000000000000000002222222222ee2222222222222222222222222222222222220000eeee0000000000000000000000074444555444ccccc
000000000000000000000000000ee00ee22222222222222222222222222222222222211111122222200ee2211ee000000000000000000000c6644444454ccccc
000000000000000000000000000ee00ee22222222222222222222222222222222222211111122222200ee2211ee000000000000000000000777776644444cccc
00000000000000000000000000011ee22222211222222222222222222222222222211111111112222ee221100110000000000000000000001117777644544ccc
00000000000000000000000000011ee22222211222222222222222222222222222211111111112222ee221100110000000000000000000001111117776455ccc
00000000000000000000000000000112222110011222222222211112222222222111111111100112222110000000000000000000000000004441111177644ccc
000000000000000000000000000001122221100112222222222111122222222221111111111001122221100000000000000000000000000044445111177645cc
000000000000000000000000000000011110000001111111111000011111111000000111100000011110000000000000000000000000000044445411117744cc
000000000000000000000000000000011110000001111111111000011111111000000111100000011110000000000000000000000000000044445444111764cc
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044445444451764cc
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044445444454174cc
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044445444454577cc
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544446cc
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544446cc
000000111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544446cc
0000001aa9aaaaaaaaaaaaa9aa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544446cc
0000001aaaaaaaaaaaaaaa9aaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544466cc
0000001aaaaaa1aaaaa1aaaaaa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000444544445444c6cc
0000001a9aaa111aaa111aaaaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444544c7ccc
0000001aaaa17771a17771aa9a100000000000000000000000000000000000000000000000000000000000000000000000000000000000004445444454c77ccc
0000001aaa177cc717cc771aaa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000444544445c766ccc
0000001aaa17c11c1c11c71aaa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000444544445776cccc
0000001aaa17c11cac11c71aaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000044454444c76ccccc
0000001aaa177cc1a1cc771aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000004445444c766ccccc
0000001aaaa17771a17771aaaa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000444544476ccccccc
00000001aaaa111aaa111aaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000445544c76ccccccc
00000001aaa1aaaaaaaaa1aaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccc76cccccccc
000000019aaa111111111aaaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000007676776ccccccccc
00000001aaaaa1771771aaaa91000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011aaaaa1771771aaaa91100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001771aaaaa11a11aaa9917710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000017719aaaaaaaaaaaaaa17710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000017177777778777777717100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001a11111111811111111a100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000011a14444444844444441a110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001aa14444444444444441aa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000111144444111114444411110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011111100011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001aa9aaa10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001ac7ac710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001aaaaa910000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a9a77aaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000174444710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001a11a100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001110001111111000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001000011000001100001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001333110000000113331000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000017113100000000013117100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001777a3300000000033a77710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001787a3300000000033a78710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000a77aa3100000000013aa77a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000013aaa331000000000133aaa31000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10001333313100000000013133331000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01111331131000100010001311331001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00013333331111000001111333331110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00013333331000000000001333333100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00013333310000000000000133333100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00001133310000000000000133331100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000111000000000000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000101000000000000000001001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0101010000000000000000000100000001010100000000000000000001000000010102000000000000000000010000000202010000000000000000000100000000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100
0202020100000000000000000000000002020200000000000000000000000000020004000000000000000000000000000404020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030202020202020505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030202020202020505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4e4f040404040404040404040404040c0d040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5e5f040404040404040404040404041c1d040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6e6f040404040404040404040404042c2d040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7e7f040404040404040404040404043c3d040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030304040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000a000004050060500a0500e05012050140501405012050100500d0500e050140501705000000120500f0500c0500a0500805006050050500405003050000000000000000000000000000000000000000000000
